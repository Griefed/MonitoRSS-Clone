[![MonitoRSS-Clone](https://i.griefed.de/images/2021/01/24/monitorss-clone_header.png)](https://github.com/Griefed/MonitoRSS-Clone)

[![Homepage](https://img.shields.io/badge/Griefed.de-Homepage-c0ffee?style=for-the-badge&labelColor=325358&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAACylBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v6OsnIvAAAA7XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiQlJicoKSorLC0uLzAxMjU2Nzg5Ojs8Pj9AQUJERUZHSElLTE9QUVJTVFVWV1hZXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SGh4iJiouMjY6P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)](https://www.griefed.de)
[![Blog](https://img.shields.io/badge/Griefed.de-Blog-c0ffee?style=for-the-badge&labelColor=325358&logo=wordpress)](https://www.griefed.de/blog)
[![Fleet](https://img.shields.io/badge/Griefed.de-Fleet-c0ffee?style=for-the-badge&labelColor=325358&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABiVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8XJWL///8gNCTuAAAAgXRSTlMAAgMEBQYHCAkLDA4PEBESFhgZGh0eISIlKC8zNDU3OT0+P0BBQkhKS01QU1RVVltcXWJjZGlrbG1wcnN0eHl6e4CBhYyOkJWWmZ6foaKkqaqsrrKztLe8vsHExcbHy8zNz9DT1NXX2Nna293e3+Tm5+nq7O3u7/Hy9fb4+fr7/f4zgtRAAAABWklEQVR42mKgHhCFMbg0dHW1xNGlBcw5wTS7tkcJoNV5UJItBoMA3GPjcm3btm3btq1+8s1JxijuV0p+X5NzVcfNRoT4O26ClEZykdydI5ddCHDt+EfqthiwYoXfRH++yb9r8IZ+o/CpeB1hE/zMtXf0KYKkP9p8ZSaCfq1S2ddDU84zrsuXYXZjYy0VcBxQKYVmgQ9slS8HhUbxSP+kNAPB+kIyO1ggr5mn9GoX70wKydA4/RNQQSVPvGspZEHQ5ZKHK5lu8UymUi/enRQuxYjcN5LPH+RTQfcVlQ4AbfJ1n4JKRusG0ErpzCn3vjFMe8g9/eUU2himHEAilc+Vq6XJ4Zyx6eXTk3f6/IOww7i2oOliXNXQ/H5kHBcWSO2MowyKJc4VU/BLOGcMm04EJF3FyHsQImkvMj/tQBhrz0to+rwSUf70XvjT23VWxKLLaBkYGuqr+Y8f9Q3q0fzzGED8cgAAAABJRU5ErkJggg==)](https://fleet.griefed.de)
[![GitHub](https://img.shields.io/badge/Griefed.de-Github-c0ffee?style=for-the-badge&labelColor=325358&logo=github)](https://github.com/Griefed)
[![DockerHub](https://img.shields.io/badge/Griefed.de-DockerHub-c0ffee?style=for-the-badge&labelColor=325358&logo=docker&logoColor=white)](https://hub.docker.com/u/griefed)

---

# MonitoRSS-Clone

[![Docker Pulls](https://img.shields.io/docker/pulls/griefed/monitorss-clone?style=for-the-badge&logo=Docker&labelColor=325358&color=c0ffee&logoColor=white)](https://hub.docker.com/repository/docker/griefed/monitorss-clone)
[![Docker Image Size (latest by date)](https://img.shields.io/docker/image-size/griefed/monitorss-clone?label=Image%20size&sort=date&style=for-the-badge&logo=Docker&labelColor=325358&color=c0ffee&logoColor=white)](https://hub.docker.com/repository/docker/griefed/monitorss-clone)
[![Docker Cloud Build Status](https://img.shields.io/docker/cloud/build/griefed/monitorss-clone?label=Docker%20build&style=for-the-badge&logo=Docker&labelColor=325358&color=c0ffee&logoColor=white)](https://hub.docker.com/repository/docker/griefed/monitorss-clone)
[![Docker Cloud Automated build](https://img.shields.io/docker/cloud/automated/griefed/monitorss-clone?label=Docker%20build&style=for-the-badge&logo=Docker&labelColor=325358&color=c0ffee&logoColor=white)](https://hub.docker.com/repository/docker/griefed/monitorss-clone)
[![GitHub Repo stars](https://img.shields.io/github/stars/Griefed/MonitoRSS-Clone?label=GitHub%20Stars&style=for-the-badge&logo=Github&labelColor=325358&color=c0ffee)](https://github.com/Griefed/MonitoRSS-Clone)
[![GitHub forks](https://img.shields.io/github/forks/Griefed/MonitoRSS-Clone?label=GitHub%20Forks&style=for-the-badge&logo=Github&labelColor=325358&color=c0ffee)](https://github.com/Griefed/MonitoRSS-Clone)

A control panel for the news-delivering MonitoRSS (formerly known as Discord.RSS) bot.

[![MonitoRSS-Web](https://i.griefed.de/images/2021/01/24/monitorss-clone_screenshot.png)](https://github.com/synzen/MonitoRSS-Clone

---

Creates a Container which runs [synzen's](https://github.com/synzen) [MonitoRSS-Clone](https://github.com/synzen/MonitoRSS-Clone), with [lsiobase/alpine](https://hub.docker.com/r/lsiobase/alpine) as the base image, as seen on https://monitorss.xyz/.

The [lsiobase/alpine](https://hub.docker.com/r/lsiobase/alpine) image is a custom base image built with [Alpine linux](https://alpinelinux.org/) and [S6 overlay](https://github.com/just-containers/s6-overlay).
Using this image allows us to use the same user/group ids in the container as on the host, making file transfers much easier

# Deployment

Tags | Description
-----|------------
`latest` | Using the `latest` tag will pull the latest image for linux/amd64,linux/arm/v7,linux/arm64.
`develop` | The latest image of, if existent, the in-dev version of this container. Use at your own risk!

Using GitHub Workflows, images for this container are multi-arch. Simply pulling `:latest` should retrieve the correct image for your architecture.
Images are available for linux/amd64,linux/arm/v7,linux/arm64.


## Full stack

```docker-compose.yml
version: "3.5"
services:
  mrss-redis:
    container_name: mrss-redis
    restart: on-failure:5
    image: redis:alpine
  mrss-mongo:
    container_name: mrss-mongodb
    restart: on-failure:5
    command: mongod --port 27017
    image: mongo:latest
    volumes:
      - ./path/to/data/db:/data/db
  mrss-bot-web:
    container_name: mrss-bot-web
    restart: on-failure:3
    image: griefed/monitorss-clone
    ports:
     - 8081:8081
    depends_on:
      - mrss-mongo
      - mrss-redis
    environment:
      - TZ=Europe/Berlin
      - PUID=1000
      - PGID=1000
      - DRSS_START=bot-web
      - DRSS_BOT_TOKEN=
      - DRSS_DATABASE_URI=mongodb://mrss-mongo:27017/rss
      - DRSS_BOT_PREFIX=~
      - DRSS_BOT_OWNERIDS=
      - DRSSWEB_DATABASE_URI=mongodb://mrss-mongo:27017/rss
      - DRSSWEB_DATABASE_REDIS=redis://mrss-redis:6379
      - DRSSWEB_ADMINIDS=
      - DRSSWEB_BOT_TOKEN=
      - DRSSWEB_BOT_REDIRECTURI=
      - DRSSWEB_BOT_CLIENTID=
      - DRSSWEB_BOT_CLIENTSECRET=
      - DRSSWEB_SESSION_SECRET=z3tv8mu93vtz8m9oavt3a4
```

# Standalone

## pre-built images

```yml
version: "2"
services:
  monitorss-clone:
    image: griefed/monitorss-clone:latest
    container_name: monitorss-clone
    restart: unless-stopped
    environment:
      - PUID=1000   # User ID
      - PGID=1000   # Group ID
      - DRSS_START=bot-web # Determine what parts of MonitoRSS to start. Input bot to only start the bot, web to start only the web, or bot-web to start both.
      - DRSS_DATABASE_URI=mongodb://mrss-mongo:27017/rss # MongoDB database URI. Cannot be a folder URI (data would not persist across reboots).
      - DRSS_BOT_TOKEN=123456 # Discord Bot token. Get it here: https://discordapp.com/developers/applications/.
      - DRSS_BOT_PREFIX=~ # Prefix for commands
      - DRSS_BOT_OWNERIDS=123456 # Owner ID(s), separate multiple with a comma.
      - DRSSWEB_DATABASE_URI=mongodb://mrss-mongo:27017/rss # REQUIRED IF DRSS_START IS web OR bot-web. MongoDB database URI. Must be the same as DRSS_DATABASE_URI.
      - DRSSWEB_DATABASE_REDIS=redis://mrss-redis:6379 # Redis database URI.
      - DRSSWEB_BOT_TOKEN=123456 # REQUIRED IF DRSS_START IS web OR bot-web. Use the same token as DRSS_BOT_TOKEN.
      - DRSSWEB_BOT_REDIRECTURI=http://localhost:8081/authorize # REQUIRED IF DRSS_START IS web OR bot-web. Insert the domain name appending /authorize. Example on heroku: https://APPNAME.herokuapp.com/authorize. Make sure the exact url is also set set under the application OAuth2 tab under redirects.
      - DRSSWEB_BOT_CLIENTSECRET=123456 # REQUIRED IF DRSS_START IS web OR bot-web. Found on your app page at Discord Developers at https://discordapp.com/developers/applications/
      - DRSSWEB_BOT_CLIENTID=123456 # REQUIRED IF DRSS_START IS web OR bot-web. App ID that can be found on the general information page at https://discordapp.com/developers/applications/. This should only contain numbers.
      - DRSSWEB_ADMINIDS=123456 # REQUIRED IF DRSS_START IS web OR bot-web. Web admin ID(s), separate multiple with commas.
    ports:
      - 8081:8081/tcp # (When using web) Port at which the web interface will be available at
```

## cli

```bash
docker create \
  --name=monitorss-clone \
  -e PUID=1000   `# User ID` \
  -e PGID=1000   `# Group ID` \
  -e DRSS_START=bot-web `# Determine what parts of MonitoRSS to start. Input bot to only start the bot, web to start only the web, or bot-web to start both.` \
  -e DRSS_DATABASE_URI=mongodb://mrss-mongo:27017/rss `# MongoDB database URI. Cannot be a folder URI (data would not persist across reboots).` \
  -e DRSS_BOT_TOKEN=123456 `# Discord Bot token. Get it here: https://discordapp.com/developers/applications/.` \
  -e DRSS_BOT_PREFIX=~ `# Prefix for commands` \
  -e DRSS_BOT_OWNERIDS=123456 `# Owner ID(s), separate multiple with a comma.` \
  -e DRSSWEB_DATABASE_URI=mongodb://mrss-mongo:27017/rss `# REQUIRED IF DRSS_START IS web OR bot-web. MongoDB database URI. Must be the same as DRSS_DATABASE_URI.` \
  -e DRSSWEB_DATABASE_REDIS=redis://mrss-redis:6379 `# Redis database URI.` \
  -e DRSSWEB_BOT_TOKEN=123456 `# REQUIRED IF DRSS_START IS web OR bot-web. Use the same token as DRSS_BOT_TOKEN.` \
  -e DRSSWEB_BOT_REDIRECTURI=http://localhost:8081/authorize `# REQUIRED IF DRSS_START IS web OR bot-web. Insert the domain name appending /authorize. Example on heroku: https://APPNAME.herokuapp.com/authorize. Make sure the exact url is also set set under the application OAuth2 tab under redirects.` \
  -e DRSSWEB_BOT_CLIENTSECRET=123456 `# REQUIRED IF DRSS_START IS web OR bot-web. Found on your app page at Discord Developers at https://discordapp.com/developers/applications/` \
  -e DRSSWEB_BOT_CLIENTID=123456 `# REQUIRED IF DRSS_START IS web OR bot-web. App ID that can be found on the general information page at https://discordapp.com/developers/applications/. This should only contain numbers.` \
  -e DRSSWEB_ADMINIDS=123456 `# REQUIRED IF DRSS_START IS web OR bot-web. Web admin ID(s), separate multiple with commas.` \
  -p 8081:8081/tcp `# (When using web) Port at which the web interface will be available at` \
  --restart unless-stopped \
  griefed/monitorss-clone:latest
```

# Configuration

Configuration | Explanation
------------ | -------------
[Restart policy](https://docs.docker.com/compose/compose-file/#restart) | "no", always, on-failure, unless-stopped
TZ | Timezone
PUID | for UserID
PGID | for GroupID
ports | The port where the service will be available at.
DRSS_START | Determine what parts of MonitoRSS to start. Input bot to only start the bot, web to start only the web, or bot-web to start both.
DRSS_BOT_TOKEN | Discord Bot token. Get it here: https://discordapp.com/developers/applications/.
DRSS_DATABASE_URI | MongoDB database URI. Cannot be a folder URI (data would not persist across reboots).
DRSSWEB_DATABASE_REDIS | Redis database URI.
DRSS_BOT_PREFIX | Prefix for Discord commands.
DRSS_BOT_OWNERIDS | Owner ID(s), separate multiple with a comma.
DRSSWEB_DATABASE_URI | REQUIRED IF DRSS_START IS web OR bot-web. MongoDB database URI. Must be the same as DRSS_DATABASE_URI.
DRSSWEB_ADMINIDS | REQUIRED IF DRSS_START IS web OR bot-web. Web admin ID(s), separate multiple with commas.
DRSSWEB_BOT_TOKEN | REQUIRED IF DRSS_START IS web OR bot-web. Use the same token as DRSS_BOT_TOKEN.
DRSSWEB_BOT_REDIRECTURI | REQUIRED IF DRSS_START IS web OR bot-web. Insert the domain name appending /authorize. Example on heroku: https://APPNAME.herokuapp.com/authorize. Make sure the exact url is also set set under the application OAuth2 tab under redirects.
DRSSWEB_BOT_CLIENTID | REQUIRED IF DRSS_START IS web OR bot-web. App ID that can be found on the general information page at https://discordapp.com/developers/applications/. This should only contain numbers.
DRSSWEB_BOT_CLIENTSECRET | REQUIRED IF DRSS_START IS web OR bot-web. Found on your app page at Discord Developers at https://discordapp.com/developers/applications/
DRSSWEB_SESSION_SECRET | Random string e.g. `tzt8q3z89gpc345qa98zmg3cg`

## User / Group Identifiers

When using volumes, permissions issues can arise between the host OS and the container. [Linuxserver.io](https://www.linuxserver.io/) avoids this issue by allowing you to specify the user `PUID` and group `PGID`.

Ensure any volume directories on the host are owned by the same user you specify and any permissions issues will vanish like magic.

In this instance `PUID=1000` and `PGID=1000`, to find yours use `id user` as below:

```
  $ id username
    uid=1000(dockeruser) gid=1000(dockergroup) groups=1000(dockergroup)
```

# Building the image yourself

Use the [Dockerfile](https://github.com/Griefed/MonitoRSS-Clone/Dockerfile) to build the image yourself, in case you want to make any changes to it

docker-compose.yml:

```docker-compose.yml
version: "3.5"
services:
  mrss-redis:
    container_name: mrss-redis-container
    restart: on-failure:5
    image: redis:alpine
  mrss-mongo:
    container_name: mrss-mongodb-container
    restart: on-failure:5
    command: mongod --port 27017
    image: mongo:latest
    volumes:
      - 'db-data:/data/db'
  mrss-bot-web:
    container_name: mrss-bot-web
    restart: on-failure:3
    build: ./MonitoRSS-Clone/.
    depends_on:
      - mrss-mongo
      - mrss-redis
    environment:
      - TZ=Europe/Berlin
      - PUID=1000
      - PGID=1000
      - DRSS_START=bot-web
      - DRSS_BOT_TOKEN=
      - DRSS_DATABASE_URI=mongodb://mrss-mongo:27017/rss
      - DRSS_BOT_PREFIX=~
      - DRSS_BOT_OWNERIDS=
      - DRSSWEB_DATABASE_URI=mongodb://mrss-mongo:27017/rss
      - DRSSWEB_DATABASE_REDIS=redis://mrss-redis:6379
      - DRSSWEB_ADMINIDS=
      - DRSSWEB_BOT_TOKEN=
      - DRSSWEB_BOT_REDIRECTURI=
      - DRSSWEB_BOT_CLIENTID=
      - DRSSWEB_BOT_CLIENTSECRET=
      - DRSSWEB_SESSION_SECRET=z3tv8mu93vtz8m9oavt3a4
```

1. Clone the repository: `git clone https://github.com/Griefed/MonitoRSS-Clone.git ./MonitoRSS-Clone`
1. Prepare docker-compose.yml file as seen above
1. `docker-compose up -d --build mrss-bot-web`
1. Visit IP.ADDRESS.OF.HOST:8080
1. ???
1. Profit!